<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Professional color band smoother with interactive editing, multiple algorithms, and real-time visualization. Create smooth color gradients with HSL, LAB, RGB, and Bezier interpolation.">
    <meta name="keywords" content="color, gradient, smoother, HSL, LAB, RGB, color picker, design tool">
    <meta property="og:title" content="Color Band Smoother">
    <meta property="og:description" content="Professional tool for creating smooth color gradients with multiple interpolation algorithms">
    <meta property="og:type" content="website">
    <title>Color Band Smoother</title>
    <link rel="stylesheet" href="styles.css?v=20251001">
</head>
<body>
    <!-- Bottom Right Controls -->
    <div class="bottom-controls">
        <button class="control-btn" id="historyToggle" aria-label="Toggle history" title="Show edit history">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M13.5,8H12V13L16.28,15.54L17,14.33L13.5,12.25V8M13,3A9,9 0 0,0 4,12H1L4.96,16.03L9,12H6A7,7 0 0,1 13,5A7,7 0 0,1 20,12A7,7 0 0,1 13,19C11.07,19 9.32,18.21 8.06,16.94L6.64,18.36C8.27,20 10.5,21 13,21A9,9 0 0,0 22,12A9,9 0 0,0 13,3" />
            </svg>
        </button>
        <button class="control-btn" id="dataToggle" aria-label="Toggle data view" title="Toggle compact data view">
            <svg class="expand-icon" viewBox="0 0 24 24" fill="currentColor">
                <path d="M10,21V19H6.41L10.91,14.5L9.5,13.09L5,17.59V14H3V21H10M14.5,10.91L19,6.41V10H21V3H14V5H17.59L13.09,9.5L14.5,10.91Z" />
            </svg>
            <svg class="collapse-icon hidden" viewBox="0 0 24 24" fill="currentColor">
                <path d="M14,14H19V16H16V19H14V14M5,14H10V19H8V16H5V14M8,5H10V10H5V8H8V5M19,8V10H14V5H16V8H19Z" />
            </svg>
        </button>
        <button class="control-btn" id="themeToggle" aria-label="Toggle theme">
            <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
            </svg>
            <svg class="moon-icon hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
            </svg>
        </button>
    </div>

    <div class="app-layout">
        <div class="sidebar">
            <div class="sidebar-top">
                <h3 class="heading-xl hidden">Smoothing Options</h3>
                <div class="control-group">
                    <div class="control-row">
                        <label for="bandCount">Bands:</label>
                        <div class="number-input-wrapper">
                            <button class="number-input-btn decrement" data-target="bandCount" aria-label="Decrease band count">
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M19,13H5V11H19V13Z" />
                                </svg>
                            </button>
                            <input type="number" id="bandCount" min="3" max="20" value="10" class="number-input">
                            <button class="number-input-btn increment" data-target="bandCount" aria-label="Increase band count">
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" />
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="control-group">
                    <label for="smoothingAlgorithm">Smoothing Algorithm:</label>
                    <div class="algorithm-control-wrapper">
                        <select id="smoothingAlgorithm">
                            <option value="hsl">HSL Interpolation</option>
                            <option value="lab">LAB Interpolation</option>
                            <option value="rgb">RGB Linear</option>
                            <option value="bezier">Bezier Curve</option>
                        </select>
                        <button id="reapplyAlgorithmBtn" class="btn-icon-small" title="Reapply smoothing algorithm">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z" />
                            </svg>
                        </button>
                    </div>
                    <p id="algorithmDescription" class="description">
                        Interpolates between colors maintaining hue relationships for natural gradients.
                    </p>
                </div>
                
                <div class="control-group">
                    <div class="control-row">
                        <label for="smoothingStrength">Strength:</label>
                        <div class="number-input-wrapper">
                            <button class="number-input-btn decrement" data-target="smoothingStrength" aria-label="Decrease smoothing strength">
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M19,13H5V11H19V13Z" />
                                </svg>
                            </button>
                            <input type="number" id="smoothingStrength" min="0" max="1" step="0.1" value="1.0" class="number-input">
                            <button class="number-input-btn increment" data-target="smoothingStrength" aria-label="Increase smoothing strength">
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" />
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="sidebar-bottom">
                <!-- Import Section -->
                <div class="sidebar-section">
                    <h5>Import</h5>
                    
                    <div class="button-grid">
                        <button id="importClipboardBtn" class="btn-small btn-secondary-small" title="Import colors from Figma clipboard data">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M19,20H4C2.89,20 2,19.1 2,18V6C2,4.89 2.89,4 4,4H10L12,6H19A2,2 0 0,1 21,8H21L4,8V18L6.14,10H23.21L20.93,18.5C20.7,19.37 19.92,20 19,20Z" />
                            </svg>
                            Clipboard
                        </button>
                        
                        <button id="importFileBtn" class="btn-small btn-secondary-small" title="Import colors from JSON/YAML file">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z" />
                            </svg>
                            JSON/YAML
                        </button>
                    </div>
                    <input type="file" id="fileInput" accept=".json,.yaml,.yml" style="display: none;">
                </div>
                
                <!-- Export Section -->
                <div class="sidebar-section">
                    <h5>Export</h5>
                    
                    <div class="button-grid">
                        <button id="copyAllForFigma" class="btn-small btn-secondary-small" title="Copy all assets (colors + graphs) for Figma">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M11.2001 3.28H8.84008C7.53669 3.28 6.48008 4.33662 6.48008 5.64C6.48008 6.94338 7.53669 8 8.84008 8H11.2001V3.28ZM11.2001 1.68H12.8001H15.1601C17.3472 1.68 19.12 3.45277 19.12 5.64C19.12 6.93061 18.5027 8.07706 17.5471 8.8C18.5027 9.52294 19.12 10.6694 19.12 11.96C19.12 14.1471 17.3472 15.92 15.1601 15.92C14.2758 15.92 13.4592 15.6302 12.8001 15.1403V15.92L12.8001 18.28C12.8001 20.4671 11.0272 22.24 8.84008 22.24C6.65294 22.24 4.88008 20.4671 4.88008 18.28C4.88008 16.9893 5.49741 15.8429 6.45307 15.12C5.49741 14.3971 4.88008 13.2506 4.88008 11.96C4.88008 10.6694 5.4975 9.52294 6.45311 8.8C5.4975 8.07706 4.88008 6.93061 4.88008 5.64C4.88008 3.45277 6.65294 1.68 8.84008 1.68H11.2001ZM12.8001 3.28V8H15.1601C16.4635 8 17.52 6.94338 17.52 5.64C17.52 4.33662 16.4635 3.28 15.1601 3.28H12.8001ZM8.84008 14.32H11.2001L11.2001 11.9661L11.2001 11.96L11.2001 11.9539V9.6H8.84008C7.53669 9.6 6.48008 10.6566 6.48008 11.96C6.48008 13.2603 7.53163 14.3149 8.83072 14.32L8.84008 14.32ZM6.48008 18.28C6.48008 16.9797 7.53163 15.9251 8.83072 15.92L8.84008 15.92H11.2001L11.2001 18.28C11.2001 19.5834 10.1435 20.64 8.84008 20.64C7.53669 20.64 6.48008 19.5834 6.48008 18.28ZM12.8001 11.9553C12.8026 10.6541 13.8582 9.6 15.1601 9.6C16.4635 9.6 17.52 10.6566 17.52 11.96C17.52 13.2634 16.4635 14.32 15.1601 14.32C13.8582 14.32 12.8026 13.2659 12.8001 11.9647V11.9553Z" />
                            </svg>
                            Editable
                        </button>
                        
                        <button id="exportJsonBtn" class="btn-small btn-secondary-small" title="Export colors as JSON/YAML file">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M14,2L20,8V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V4A2,2 0 0,1 6,2H14M18,20V9H13V4H6V20H18Z" />
                            </svg>
                            JSON/YAML
                        </button>
                    </div>
                </div>
            </div>
        </div>        
        <div class="main-content">
            <div class="color-editor">
                <h3 class="hidden">Color Band Editor</h3>
                <div id="colorBandEditor" class="color-band-editor"></div>
            </div>

            <div class="color-preview-container">
                <div id="colorBandPreview" class="color-band-preview"></div>
                <div class="copy-buttons">
                    <button id="copyFigma" class="copy-btn">Copy for Figma</button>
                    <button id="copyList" class="copy-btn">Copy comma separated list</button>
                </div>
            </div>
            <div class="graphs-container">
                <div class="color-graph-container">
                    <div class="graph-header">
                        <div class="graph-title">Lightness relationship</div>
                        <button id="copyGraphFigma" class="copy-btn graph-copy-btn">Copy for Figma</button>
                    </div>
                    <div id="colorSpaceGraph" class="color-space-graph">
                        <div class="graph-content">
                            <svg class="graph-svg" viewBox="0 0 440 160" preserveAspectRatio="xMidYMid meet">
                                <defs>
                                    <linearGradient id="backgroundGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                        <stop offset="0%" class="graph-bg-stop"/>
                                        <stop offset="100%" class="graph-bg-stop"/>
                                    </linearGradient>
                                </defs>
                                <rect width="100%" height="100%" fill="url(#backgroundGradient)"/>
                                
                                <!-- Y-axis labels and ticks -->
                                <g class="y-axis-group">
                                    <text x="25" y="25" class="axis-label">100%</text>
                                    <text x="25" y="140" class="axis-label">0%</text>
                                    <text x="12" y="82" class="axis-title">L*</text>
                                </g>
                                
                                <!-- X-axis label -->
                                <g class="x-axis-group">
                                    <text x="220" y="155" class="axis-title">Color Index</text>
                                </g>
                                
                                <g class="graph-grid"></g>
                                <g class="graph-line"></g>
                                <g class="graph-points"></g>
                            </svg>
                        </div>
                    </div>
                </div>
                <div class="color-graph-container">
                    <div class="graph-header">
                        <div class="graph-title">Hue relationship</div>
                        <button id="copyHueGraphFigma" class="copy-btn graph-copy-btn">Copy for Figma</button>
                    </div>
                    <div id="hueSpaceGraph" class="color-space-graph">
                        <div class="graph-content">
                            <svg class="graph-svg" viewBox="0 0 440 160" preserveAspectRatio="xMidYMid meet">
                                <defs>
                                    <linearGradient id="hueBackgroundGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                        <stop offset="0%" class="graph-bg-stop"/>
                                        <stop offset="100%" class="graph-bg-stop"/>
                                    </linearGradient>
                                </defs>
                                <rect width="100%" height="100%" fill="url(#hueBackgroundGradient)"/>
                                
                                <!-- Y-axis labels and ticks -->
                                <g class="y-axis-group">
                                    <text x="25" y="25" class="axis-label hue-max">360°</text>
                                    <text x="25" y="82" class="axis-label hue-mid">180°</text>
                                    <text x="25" y="140" class="axis-label hue-min">0°</text>
                                    <text x="12" y="82" class="axis-title">H°</text>
                                </g>
                                
                                <!-- X-axis label -->
                                <g class="x-axis-group">
                                    <text x="220" y="155" class="axis-title">Color Index</text>
                                </g>
                                
                                <g class="graph-grid"></g>
                                <g class="hue-graph-line"></g>
                                <g class="hue-graph-points"></g>
                            </svg>
                        </div>
                    </div>
                </div>
                <div class="color-graph-container">
                    <div class="graph-header">
                        <div class="graph-title">Saturation relationship</div>
                        <button id="copySaturationGraphFigma" class="copy-btn graph-copy-btn">Copy for Figma</button>
                    </div>
                    <div id="saturationSpaceGraph" class="color-space-graph">
                        <div class="graph-content">
                            <svg class="graph-svg" viewBox="0 0 440 160" preserveAspectRatio="xMidYMid meet">
                                <defs>
                                    <linearGradient id="saturationBackgroundGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                        <stop offset="0%" class="graph-bg-stop"/>
                                        <stop offset="100%" class="graph-bg-stop"/>
                                    </linearGradient>
                                </defs>
                                <rect width="100%" height="100%" fill="url(#saturationBackgroundGradient)"/>
                                
                                <!-- Y-axis labels and ticks -->
                                <g class="y-axis-group">
                                    <text x="25" y="25" class="axis-label saturation-max">100%</text>
                                    <text x="25" y="82" class="axis-label saturation-mid">50%</text>
                                    <text x="25" y="140" class="axis-label saturation-min">0%</text>
                                    <text x="12" y="82" class="axis-title">S%</text>
                                </g>
                                
                                <!-- X-axis label -->
                                <g class="x-axis-group">
                                    <text x="220" y="155" class="axis-title">Color Index</text>
                                </g>
                                
                                <g class="graph-grid"></g>
                                <g class="saturation-graph-line"></g>
                                <g class="saturation-graph-points"></g>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- History Panel -->
    <div class="history-panel" id="historyPanel">
        <div class="history-header">
            <h3>History</h3>
            <div class="history-header-actions">
                <button class="history-clear-btn" id="historyClear" aria-label="Clear history" title="Clear all history">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" />
                    </svg>
                </button>
                <button class="history-close-btn" id="historyClose" aria-label="Close history">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" />
                    </svg>
                </button>
            </div>
        </div>
        <div class="history-content">
            <div class="history-current">
                <div class="history-item current">
                    <div class="history-icon">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4Z" />
                        </svg>
                    </div>
                    <div class="history-info">
                        <div class="history-label">Current version</div>
                        <div class="history-colors" id="currentColors"></div>
                    </div>
                </div>
            </div>
            <div class="history-timeline" id="historyTimeline">
                <!-- History items will be inserted here -->
            </div>
        </div>
    </div>

    <script src="colorUtils.js"></script>
    <script src="smoothingAlgorithms.js"></script>
    <script src="app.js"></script>
</body>
</html>